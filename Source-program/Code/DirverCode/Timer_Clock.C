/* *******************************************************************************************
// Author:      biu~
// Last Date:   2018/03/22
// 基于定时器的时钟；
/* ******************************************************************************************* */

#include "Timer_Clock.H"

char Hour = 8,
     Min = 25,
     Sec = 30;      //时分秒；
u16 Chronograph;    //计时计次；

/* *******************************************************************************************
// 时间时钟初始化，包括时分秒的初始化及对 计时计次 参数的计算；
/* ******************************************************************************************* */
void Timer_Clock_Init()
{
    Hour = 8;      //此处时间调节可考虑结合E2PROM；
    Min = 25;
    Sec = 0;
    Chronograph = _1S / TIME_BASE;	
}

/* *******************************************************************************************
// 时间时钟计时函数；
/* ******************************************************************************************* */
void Timer_Clock()
{
    static u16 cP;
    if (++ cP >= Chronograph)
    {
        cP = 0;
        if (++ Sec >= 60)
        {
            Sec = 0;
            if (++ Min >= 60)
            {
                Min = 0;
                if (++ Hour >= 24)
                {
                    Hour = 0;
                }
            }
        }
    }
}
