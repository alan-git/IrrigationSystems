C51 COMPILER V9.02   LCD1602                                                               03/24/2018 15:00:43 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN ..\Output\LCD1602.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ..\Code\DirverCode\LCD1602.C BROWSE INCDIR(..\Code\DeveloperCode\inc;..\Cod
                    -e\DirverCode\inc;..\Code\Public\inc) DEBUG OBJECTEXTEND PRINT(..\Listing\LCD1602.lst) OBJECT(..\Output\LCD1602.obj)

line level    source

   1          /* *******************************************************************************************
   2          // Author:      biu~
   3          // Last Date:   2018/03/22
   4          // Keil工程第一个Tab设置填充空格的
   5          /* ******************************************************************************************* */
   6          #include "LCD1602.H"
   7          
   8          #define LCD_DATAPIN P2      //并口数据传输；
   9          
  10          sbit LCD1602_RS = P3^1;
  11          sbit LCD1602_RW = P3^2;
  12          sbit LCD1602_E  = P3^3;
  13          /* *******************************************************************************************
  14          // 向LCD1602写一字节命令
  15          /* ******************************************************************************************* */
  16          static void writeCommand(u8 command)
  17          {
  18   1          LCD1602_RS = 0;
  19   1          LCD1602_RW = 0;
  20   1          LCD_DATAPIN = command;
  21   1          LCD1602_E = 1;      
  22   1          DelayMS(1);             //等待接收，省略了读状态操作；
  23   1          LCD1602_E = 0;
  24   1          LCD1602_RW = 1;
  25   1      }
  26          
  27          /* *******************************************************************************************
  28          // 向LCD1602写一字节数据
  29          /* ******************************************************************************************* */
  30          void WriteOneData(u8 dat)
  31          {
  32   1          LCD1602_RW = 0;
  33   1          LCD1602_RS = 1;     
  34   1          LCD_DATAPIN = dat;
  35   1          LCD1602_E = 1;
  36   1          DelayMS(1);             //等待接收，省略了读状态操作；
  37   1          LCD1602_E = 0;
  38   1          LCD1602_RW = 1;
  39   1      }
  40          
  41          /* *******************************************************************************************
  42          // 初始化LCD1602
  43          /* ******************************************************************************************* */
  44          void LCD1602_Init()
  45          {
  46   1          writeCommand(0x38);     //两行，每行16字符，每个字符5*7点阵；
  47   1          writeCommand(0x0f);     //光标显示并闪烁；
  48   1          writeCommand(0x0C);     //光标不显示；
  49   1          writeCommand(0x06);     //光标随字符右移；
  50   1      }
  51          
  52          /* *******************************************************************************************
  53          // LCD1602清屏
  54          /* ******************************************************************************************* */
C51 COMPILER V9.02   LCD1602                                                               03/24/2018 15:00:43 PAGE 2   

  55          void LCD1602_Clear()
  56          {
  57   1          writeCommand(0x01); 
  58   1          writeCommand(0x02); 
  59   1      }
  60          
  61          /* *******************************************************************************************
  62          // 向LCD1602写字符串
  63          /* ******************************************************************************************* */
  64          void LCD1602_DisString(u8 *chr)
  65          {
  66   1          while (*chr)            //字符非空；
  67   1          {
  68   2              WriteOneData(*chr);    //写字符；
  69   2              chr++;                  //数据指针加1；
  70   2          }
  71   1      }
  72          /* *******************************************************************************************
  73          // 向LCD1602写数字量(两位)
  74          /* ******************************************************************************************* */
  75          void LCD1602_DisNum(u8 two_digits_num)
  76          {
  77   1      //    u8 num[] = "0123456789";
  78   1      //    if (two_digits_num > 100)
  79   1      //    {
  80   1      //        two_digits_num %= 100;
  81   1      //    }
  82   1      //    writeData(num[two_digits_num / 10]);
  83   1      //    writeData(num[two_digits_num % 10]);      
  84   1          if (two_digits_num > 100)
  85   1          {
  86   2              two_digits_num %= 100;
  87   2          }
  88   1          WriteOneData(two_digits_num / 10 + '0');
  89   1          WriteOneData(two_digits_num % 10 + '0');    
  90   1      }
  91          /* *******************************************************************************************
  92          // 设置LCD1602坐标
  93          /* ******************************************************************************************* */
  94          void LCD1602_GoTo_yx(u8 y, u8 x)
  95          {
  96   1          switch (y)
  97   1          {
  98   2              case 1: writeCommand(0x80 + x);         //第一行
  99   2                  break;
 100   2              case 2: writeCommand(0x80 + 0x40 + x);  //第二行
 101   2                  break;
 102   2              default:
 103   2                  break;
 104   2          }
 105   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    174    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.

C51 COMPILER V9.02   LCD1602                                                               03/24/2018 15:00:43 PAGE 3   


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
